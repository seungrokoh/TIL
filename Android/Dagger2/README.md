# Dagger2

**Dagger** 란, **의존성 주입(dependency injection)** 을 구현하기 위해 사용하는 라이브러리 입니다. **스퀘어(Square)에서 최초로 만든 Dagger 라이브러리** 이며 이후 **구글(Google)에서 기능을 개선하고 안드로이드 지원을 강화한 Dagger2를 공개했습니다.**

Dagger2는 **각 객체 간의 의존 관계를 어노테이션을 사용하여 정의하며 대거 라이브러리 내의 어노테이션 프로세서(annotation processor)를 통해 문제가 없는지 분석 절차를 거치며, 문제가 없다면 각 객체를 생성하는 코드를 만들어 줍니다.** 의존 관계를 검증하는 과정과 필요한 코드를 생성하는 과정이 **모두 빌드 단계에서 일어나므로** 잘못된 의존 관계로 발생할 수 있는 문제를 사전에 방지할 수 있어 더 견고한 애플리케이션을 만들 수 있습니다.
***

### __의존성 주입(Dependency Injection)이란?__

특정 객체의 인스턴스를 직접 생성하지 않고 **외부에서 생성된 객체를 전달하는 기법입니다.** 각 객체는 다른 객체의 생성에는 관여하지 않고, 객체를 필요로 하는 부분과 독립된 별도의 모듈이 객체 생성과 주입을 전담합니다.

### __의존성 주입을 하는 이유?__

첫째, **목적에 따라 동작을 변경하기 쉽습니다.** 특정 객체에 필요한 객체를 외부에서 전달받으므로 **필요에 따라 다른 동작을 하는 객체를 간편하게 생성할 수 있습니다.**

둘째, **생성한 객체를 쉽게 재사용할 수 있습니다.** 객체를 생성하는 작업을 특정 모듈에서 전담하기 때문입니다.

셋째, **객체의 생성 또는 사용할 때 발생하는 실수가 줄어듭니다.** 같은 역할을 하는 객체를 각각 다른 곳에서 별도로 생성하도록 코드를 작성하는 경우 **해당 객체를 생성하는 모든 부분을 수정해야 하므로 실수를 유발시킬 수 있습니다.** 하지만 의존성 주입을 사용하면 **객체를 생성해주는 부분만 수정하면 되므로** 실수가 줄어들 수 있습니다.

***
## __대거를 구성하는 핵심 요소들__

### __모듈__

모듈(module)은 **필요한 객체를 제공하는 역할**을 합니다. **클래스 단위**로 구성되며 특정 객체를 반환하는 함수를 정의함으로써 모듈에서 제공하는 객체를 정의할 수 있습니다.

@Module : 모듈 클래스로 인식하게 하기 위한 Annotation

@Provides : 모듈에서 제공하는 **객체를 정의한 함수에 추가하는** Annotation

### __컴포넌트__

컴포넌트(component)는 **모듈에서 제공받은 객체를 조합하여 필요한 곳에 주입(inject)하는 역할을 합니다.** 하나의 컴포넌트는 여러개의 모듈을 조합할 수 있습니다. 따라서 **목적에 따라 각각 분리된 여러 모듈로부터 필요한 객체를 받아 사용할 수 있습니다.**  

컴포넌트는 @Component 어노테이션을 붙인 **인터페이스로 선언하며**, modules 프로퍼리르 통해 컴포넌트에 객체를 제공하는 모듈을 지정할 수 있습니다. **컴포넌트를 통해 객체를 전달받을 대상**은 모듈과 유사하게 **인터페이스 내 함수로 정의하며,** 아무런 값을 반환하지 않고 객체를 전달받을 대상을 매개변수로 받는 형태로 함수를 정의합니다.

* 컴포넌트를 통해 객체를 주입받는 항목은 **@Inject** 어노테이션으로 표시하며 컴포넌트가 ㅇ값을 주입하는 시점에 객체가 할당되므로, **값을 주입받는 프로퍼티는 lateinit var로 선언해야 합니다.**
* 대거가 생성해주는 컴포넌트의 클래스 이름은 **Dagger{Component Name}** 규칙을 따릅니다.

### __컴포넌트 빌더__

안드로이드에서 **Application과 Activity의 객체는 시스템에서 객체를 생성하기 때문에** 사용자가 임의로 객체를 생성하여 전달할 수 없으므로 모듈에서 제공할 수 없습니다. 이와 같이 **모듈에서 직접 제공할 수 없지만 객체 그래프에 추가해야 하는 객체가 있는 경우, 컴포넌트 필더 인터페이스를 사용해 컴포넌트에 추가로 전달할 객체를 간편하게 정의할 수 있습니다.**

컴포넌트 빌더 인터페이스는 @**Component.Builder로 표시하며 생성할 컴포넌트를 반환하는 build() 함수를 반드시 포함해야 합니다.** 또한 컴포넌트에 추가로 전달할 객체를 지정하려면 **해당 객체를 인자로 받고, 빌더 클래스를 반환하는 함수를 정의한 후 해당함수에 @BindInstance 어노테이션을 추가해야 합니다.**
